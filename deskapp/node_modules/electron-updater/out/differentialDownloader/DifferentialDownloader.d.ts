/// <reference types="node" />
import { BlockMapDataHolder, HttpExecutor } from "builder-util-runtime";
import { BlockMap } from "builder-util-runtime/out/blockMapApi";
import { OutgoingHttpHeaders } from "http";
import { Logger } from "../main";
export declare class DifferentialDownloaderOptions {
    readonly oldFile: string;
    readonly newUrl: string;
    readonly logger: Logger;
    readonly newFile: string;
    readonly requestHeaders: OutgoingHttpHeaders | null;
    readonly useMultipleRangeRequest?: boolean;
}
export declare abstract class DifferentialDownloader {
    protected readonly blockAwareFileInfo: BlockMapDataHolder;
    private readonly httpExecutor;
    private readonly options;
    private readonly baseRequestOptions;
    protected fileMetadataBuffer: Buffer | null;
    private readonly logger;
    constructor(blockAwareFileInfo: BlockMapDataHolder, httpExecutor: HttpExecutor<any>, options: DifferentialDownloaderOptions);
    protected readonly signatureSize: number;
    private createRequestOptions(method?);
    protected doDownload(oldBlockMap: BlockMap, newBlockMap: BlockMap): Promise<any>;
    private downloadFile(tasks);
    private executeTasks(options, out, resolve, reject);
    protected readRemoteBytes(start: number, endInclusive: number): Promise<Buffer>;
    private request(requestOptions, dataHandler);
}
export declare function readBlockMap(data: Buffer): Promise<BlockMap>;
